
<!DOCTYPE html>
<html>
<body>
.
.
<script>
    var ws = new WebSocket("ws://192.168.31.24:18080/api/v1/socket");
// var ws = new WebSocket("ws://192.168.31.40:8080/api/v1/socket");
// var ws = new WebSocket("ws://localhost:8080/api/v1/socket");

ws.onopen = function(evt) {
    console.log( new Date().getTime(), "Connection open ...");
    // ws.send("Hello WebSockets!");
    // {"type":2,"version":3,"payload":{"topic":"ID33"}}
    // ws.send("{\"topic\":\"ID33\"}"); // todo: 新增外层协议
    ws.send("{\"type\":1001,\"version\":1,\"payload\":{\"topic\":\"ID29\"}}") // {\"type\":1001,\"version\":1,\"payload\":{\"topic\":\"ID33\"}}
};

ws.onmessage = function(evt) {  
    console.log( new Date().getTime(), "Received Message: " + evt.data);
};

ws.onclose = function(evt) {  
    console.log( new Date().getTime(), "Connection closed.");
};
</script>
.
.
</body>
</html>

